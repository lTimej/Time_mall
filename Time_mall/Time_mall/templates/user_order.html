<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>Time商城-我的订单</title>
	<link rel="stylesheet" type="text/css" href="{{ static('css/reset.css') }}">
	<link rel="stylesheet" type="text/css" href="{{ static('css/main.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ static("css/order.css") }}">
    <script type="text/javascript" src="{{ static('js/vue-2.5.16.js') }}"></script>
    <script type="text/javascript" src="{{ static('js/jquery-1.12.4.min.js') }}"></script>
    <script type="text/javascript" src="{{ static('js/axios-0.18.0.min.js') }}"></script>
</head>
<body>
	<div id="app">
	    <div class="header_con">
		<div class="header" v-cloak>
            <div class="welcome fl">欢迎来到Time商城!</div>
            <div class="fr">
                <div v-if="username" class="login_btn fl">
                    欢迎您：<em>[[ username ]]</em>
                    <span>|</span>
                    <a href="{{ url('users:logout') }}">退出</a>
                </div>
                <div v-else class="login_btn fl">
                    <a href="{{ url('users:login') }}">登录</a>
                    <span>|</span>
                    <a href="{{ url('users:register') }}">注册</a>
                </div>
                <div class="user_link fl">
                    <span>|</span>
                    <a href="{{ url('users:userinfo') }}">用户中心</a>
                    <span>|</span>
                    <a href="{{ url("cart:cartlist") }}">我的购物车</a>
                    <span>|</span>
                    <a href="">我的订单</a>
                </div>
            </div>
        </div>
	</div>
	<div class="search_bar clearfix">
		<a href="{{ url('contents:index') }}" class="logo fl"><img src="{{ static('images/logo.png') }}"></a>
		<div class="search_wrap fl">
			<form method="get" action="/search/" class="search_con">
                <input type="text" class="input_text fl" name="q" placeholder="搜索商品">
                <input type="submit" class="input_btn fr" name="" value="搜索">
            </form>
			<ul class="search_suggest fl">
				<li><a href="#">索尼微单</a></li>
				<li><a href="#">优惠15元</a></li>
				<li><a href="#">美妆个护</a></li>
				<li><a href="#">买2免1</a></li>
			</ul>
		</div>
	</div>
	<div class="main_con clearfix">
		<div class="left_menu_con clearfix">
			<h3>用户中心</h3>
			<ul>
				<li><a href="{{ url('users:userinfo') }}" >· 个人信息</a></li>
				<li><a href="{{ url('users:address') }}">· 收货地址</a></li>
                <li><a href="{{ url("orders:userorder",args=(1,)) }}" class="active">· 全部订单</a></li>
				<li><a href="{{ url('users:upass') }}">· 修改密码</a></li>
			</ul>
		</div>
        <div class="user_order">
            <div class="order_search">
                <div class="search_wrap fl">
                    <form method="get" action="/search/" class="search_con">
                        <input type="text" class="input_text fl" name="q" placeholder="请输入订单中的商品名称或订单号">
                        <input type="submit" class="input_btn fr" name="" value="搜索">
                    </form>
                </div>
            </div>
            <div class="user_order_title">
                <ul>
                    <li class="order_goods">商品</li>
                    <li class="order_price">单价(元)</li>
                    <li class="order_num">数量</li>
                    <li class="order_serve">售后</li>
                    <li class="order_pay">实付款(元)</li>
                    <li class="order_status">交易状态</li>
                    <li class="order_operate">操作</li>
                </ul>
            </div>
            <div class="orders">
                <div class="orders_item" v-for="order in orders.goods">
                    <table class="order_table">
                        <tbody>
                            <tr class="order_table_title">
                                <td class="th" colspan="7">
                                    <div class="order_left fl">
                                        <span class="order_id">订单编号：<span>[[order.orderId]]</span></span>
                                        <span class="order_time">成交时间：[[order.createTime]]</span>
                                    </div>
                                    <a class="order_right fr">
                                        <span>联系商家</span>
                                    </a>
                                </td>
                            </tr>
                            <tr class="order_table_info" v-for="(ord,index) in order.orders">
                                <td class="order_goods">
                                    <a :href="'/detail/' + ord.spu_id" class="order_img"><img :src="ord.image"></a>
                                    <div class="order_desc" style="cursor: pointer">
                                        <p>
                                            <a :href="'/detail/' + ord.spu_id">[[ord.title]]</a>
                                        </p>
                                        <p v-for="spec in ord.specs">[[spec]]</p>
                                    </div>
                                </td>
                                <td class="order_price">
                                    <s class="old_price">￥[[ord.price]]</s>
                                    <p>￥[[ord.now_price]]</p>
                                </td>
                                <td class="order_num">[[ord.count]]</td>
                                <td class="order_serve"></td>
                                <td class="order_pay">
                                    <p class="total_price" v-show="ord.total_price">￥[[ord.total_price]]</p>
                                    <p v-if="ord.freight=='0.00'">(全国包邮)</p>
                                    <p v-else>[[ord.freight]]</p>
                                    <p v-show="ord.total_price">默认快递</p>
                                </td>
                                <td class="order_status">
                                    <p v-show="ord.status">[[ord.status]]</p>
                                    <a  v-show="ord.status" :href="'/order/detail/'+order.orderId">清单详情</a>
                                </td>
                                <td class="order_other">
                                    <ul>
                                        <li ><a :href="'/del/order/'+order.orderId" v-show="ord.status" >删除订单</a></li>
                                    </ul>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                {#        分页#}
                <div class="pagenation">
                    <div id="pagination" class="page"></div>
                </div>
            </div>
        </div>
	</div>
	<div class="footer">
		<div class="foot_link">
			<a href="#">关于我们</a>
			<span>|</span>
			<a href="#">联系我们</a>
			<span>|</span>
			<a href="#">招聘人才</a>
			<span>|</span>
			<a href="#">友情链接</a>
		</div>
		<p>CopyRight © 2016 咸宁Time商业股份有限公司 All Rights Reserved</p>
		<p>电话：010-****888    咸ICP备*******8号</p>
	</div>
	</div>
    <script type="text/javascript">
        //传到vue中
        let page_num = {{ page_num }};
        let total_page = {{ total_page }};
        let orders = {{ orders | safe }};
    </script>
    <script type="text/javascript" src="{{ static('js/common.js') }}"></script>
    <script type="text/javascript" src="{{ static('js/user_order.js') }}"></script>
    <script type="text/javascript" src="{{ static('js/jquery.pagination.min.js') }}"></script>
{#    分页js#}
	<script>
        $(function () {
            $('#pagination').pagination({
                currentPage: page_num, // 当期所在页码
                totalPage: total_page,   // 总页数
                callback:function (current) {
                    location.href = "/user/order/1/";
                    location.href = '/user/order/' + current + '/';
                }
            })
        });
    </script>
</body>
</html>